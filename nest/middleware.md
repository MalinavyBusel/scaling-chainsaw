Мидлвара в несте должна быть @Injectable и имплементить интерфейс NestMiddleware. Главный метод в этом интерфейсе - use,
который принимает request, response и next. Соответственно, мидлвары могут модифицировать реквест и ответ и выполнять какой-либо код
до\после обработчика или других мидлвар.
Мидлвара может быть и просто ф-ей, а не классом. Этот вариант лучше использовать, если у мидлвары нет зависимостей, так как он проще.

Мидлвары тоже могут инжектить в себя всё, что доступно в соответствующем модуле, и использовать это в своём коде.

Чтобы применить мидлвару, нужно в модуле указать это в методе configure.
